# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class ClaudeInsightsAgent < Formula
  desc "Sync Claude Code sessions to team server"
  homepage "https://github.com/dkd-dobberkau/claude-insights-agent"
  version "0.3.5"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/dkd-dobberkau/claude-insights-agent/releases/download/v0.3.5/claude-insights-agent-darwin-amd64"
      sha256 "087266f186758ebb6695d75592b1c17ef46c6db8a85d1fd56087510820e3cb0a"

      def install
        bin.install "claude-insights-agent-darwin-amd64" => "claude-insights-agent"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/dkd-dobberkau/claude-insights-agent/releases/download/v0.3.5/claude-insights-agent-darwin-arm64"
      sha256 "cb9fec0587c5f34be8db7d040bdcc0a611f0188559b78c5d2018df3ee074699b"

      def install
        bin.install "claude-insights-agent-darwin-arm64" => "claude-insights-agent"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/dkd-dobberkau/claude-insights-agent/releases/download/v0.3.5/claude-insights-agent-linux-amd64"
      sha256 "8eb1b6784e41ef37e473cceea93b53317852037e68c6ce1d95857eb3c0be428f"
      def install
        bin.install "claude-insights-agent-linux-amd64" => "claude-insights-agent"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/dkd-dobberkau/claude-insights-agent/releases/download/v0.3.5/claude-insights-agent-linux-arm64"
      sha256 "d6160da3792766568777a5d6c9bbbde6cae66b7132e953a4d60a0c6266a34b63"
      def install
        bin.install "claude-insights-agent-linux-arm64" => "claude-insights-agent"
      end
    end
  end

  def caveats
    <<~EOS
      To get started, run:
        claude-insights-agent init

      To run as a background service:
        brew services start claude-insights-agent
    EOS
  end

  service do
    run [opt_bin/"claude-insights-agent", "run"]
    keep_alive true
    log_path var/"log/claude-insights-agent.log"
    error_log_path var/"log/claude-insights-agent.log"
  end

  test do
    system "#{bin}/claude-insights-agent", "version"
  end
end
